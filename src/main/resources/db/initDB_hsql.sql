DROP TABLE IF EXISTS lessons;
DROP SEQUENCE IF EXISTS lessons_id_seq;
DROP TABLE IF EXISTS groups;
DROP SEQUENCE IF EXISTS groups_id_seq;
DROP TABLE IF EXISTS facultys;
DROP SEQUENCE IF EXISTS facultys_id_seq;

CREATE SEQUENCE facultys_id_seq AS INTEGER START WITH 1;
CREATE TABLE facultys (
  id          INTEGER GENERATED BY DEFAULT AS SEQUENCE facultys_id_seq PRIMARY KEY,
  name        LONGVARCHAR NOT NULL UNIQUE
);

CREATE SEQUENCE groups_id_seq AS INTEGER START WITH 1;
CREATE TABLE groups (
  id            INTEGER GENERATED BY DEFAULT AS SEQUENCE groups_id_seq PRIMARY KEY,
  name          LONGVARCHAR NOT NULL UNIQUE,
  course        INTEGER NOT NULL,
  faculty_id    INTEGER NOT NULL,
  FOREIGN KEY (faculty_id) REFERENCES facultys (id) ON DELETE CASCADE
);

CREATE SEQUENCE lessons_id_seq AS INTEGER START WITH 1;
CREATE TABLE lessons (
  id            INTEGER GENERATED BY DEFAULT AS SEQUENCE lessons_id_seq PRIMARY KEY,
  firstweek     BOOLEAN NOT NULL,
  day           LONGVARCHAR NOT NULL,
  number        INTEGER NOT NULL,
  subject       LONGVARCHAR NOT NULL,
  teacher       LONGVARCHAR NOT NULL,
  type          LONGVARCHAR NOT NULL,
  building      INTEGER NOT NULL,
  classroom     INTEGER NOT NULL,
  group_id      INTEGER NOT NULL,
  FOREIGN KEY (group_id) REFERENCES groups (id) ON DELETE CASCADE
);


